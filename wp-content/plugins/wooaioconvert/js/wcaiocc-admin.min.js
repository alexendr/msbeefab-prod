/**
 * 
 * Plugin: WooCommerce All in One Currency Converter
 * Author: http://dev49.net
 *
 */
function wcaiocc_count_items(a){var c=0,b;for(b in a)a.hasOwnProperty(b)&&++c;return c}
function wcaiocc_callback_action(a){if("string"===typeof a){var c=a;a={};a.name=c}var c=wcaiocc_vars_data.wp_nonce,b={};if(null==a.name)return!1;if("restore_defaults"==a.name)if(confirm(wcaiocc_vars_data.confirm_restore_defaults_msg))b={action:"wcaiocc_ajax",verification:c,execute:"restore_defaults"},wcaiocc_block_screen(!0),jQuery.post(ajaxurl,b,function(a){0>=a?alert(wcaiocc_vars_data.operation_could_not_be_completed_msg):(alert(a),location.reload());wcaiocc_block_screen(!1)});else return!1;else if("update_exchange_rates"==
a.name)b={action:"wcaiocc_ajax",verification:c,execute:"update_exchange_rates",currency_data:a.currency_data},wcaiocc_block_screen(!0),jQuery.post(ajaxurl,b,function(a){if(0>=a)alert(wcaiocc_vars_data.operation_could_not_be_completed_msg);else{var b=jQuery.parseJSON(a),c=[];a=wcaiocc_count_items(b);var h=1,l=1;jQuery.each(b,function(a){null!=b[a]&&(h=b[a].value,l=b[a].error);0==l?jQuery("#wcaiocc_exchange_"+a+"_rate").val(h):c.push(a)});var f="";1==a?0<c.length&&(f=wcaiocc_vars_data.error_currency_exchange_rate_update_msg+
c[0]):1<a?0<c.length?(f=wcaiocc_vars_data.error_currency_exchange_rate_update_msg,jQuery.each(c,function(a){f+=c[a]+", "}),f=f.slice(0,-2)):f=wcaiocc_vars_data.success_currency_exchange_rate_update_msg:f=wcaiocc_vars_data.operation_could_not_be_completed_msg;0<f.length&&alert(f)}wcaiocc_update_data();wcaiocc_block_screen(!1)});else return!1}
function wcaiocc_block_screen(a){1==a?(jQuery('<div id="wcaiocc-block-div"></div>').appendTo("body"),jQuery("#wcaiocc-block-div").css({opacity:0,width:jQuery(document).width(),height:jQuery(document).height()}),jQuery("#wcaiocc-block-div").addClass("wcaiocc-block-div"),jQuery("#wcaiocc-block-div").animate({opacity:.4},150)):jQuery("#wcaiocc-block-div").animate({opacity:0},150,function(){jQuery("#wcaiocc-block-div").remove()})}
jQuery(document).ready(function(a){0<a("#wcaiocc_remember_user_chosen_currency").length&&(wcaiocc_conversion_mode_change(a("input[type=radio][name='wcaiocc_conversion_method']:checked").val()),a("input[type=radio][name='wcaiocc_conversion_method']").on("change",function(){wcaiocc_conversion_mode_change(a(this).val())}),a("input[type=checkbox][name='wcaiocc_checkout_total_in_base_currency']").on("change",function(){a(this).is(":checked")?a("#wcaiocc_checkout_total_payment_text").removeAttr("disabled"):
a("#wcaiocc_checkout_total_payment_text").attr("disabled",!0)}),a("input[type=submit][name='save']").on("click",function(){a("#wcaiocc_checkout_total_payment_text").removeAttr("disabled");a("#wcaiocc_checkout_total_in_base_currency").removeAttr("disabled")}))});
function wcaiocc_conversion_mode_change(a){switch(a){case "reference":jQuery("#wcaiocc_checkout_total_in_base_currency").removeAttr("disabled");0<jQuery("input[type=checkbox][name='wcaiocc_checkout_total_in_base_currency']:checked").length?jQuery("#wcaiocc_checkout_total_payment_text").removeAttr("disabled"):jQuery("#wcaiocc_checkout_total_payment_text").attr("disabled",!0);break;case "checkout":jQuery("#wcaiocc_checkout_total_in_base_currency").attr("disabled",!0),jQuery("#wcaiocc_checkout_total_payment_text").attr("disabled",
!0)}}
jQuery(document).ready(function(a){if(0<a("#wcaiocc_available_currencies").length){a(".wcaiocc_new_currency").after('<a class="button" href="#onclick_action" style="width:320px;" onclick="wcaiocc_add_new_currency_blob(jQuery(\'select.wcaiocc_new_currency\').val());">'+wcaiocc_vars_data.add_currency_to_list+"</a>");a("#wcaiocc_available_currencies").after('<table class="wcaiocc-currency-table" id="wcaiocc_currency_table"></table>');a("#wcaiocc_currency_table").append('<thead><tr><th class="wcaiocc_currency_cell_code">'+wcaiocc_vars_data.currency_code+
'</th><th class="wcaiocc_currency_cell_name">'+wcaiocc_vars_data.currency_name+'</th><th class="wcaiocc_currency_cell_symbol">'+wcaiocc_vars_data.currency_symbol+'</th><th class="wcaiocc_currency_cell_position">'+wcaiocc_vars_data.currency_position+'</th><th class="wcaiocc_currency_cell_thousand">'+wcaiocc_vars_data.thousand_separator+'</th><th class="wcaiocc_currency_cell_decimal">'+wcaiocc_vars_data.decimal_separator+'</th><th class="wcaiocc_currency_cell_number">'+wcaiocc_vars_data.number_decimals+
'</th><th class="wcaiocc_currency_cell_remove">'+wcaiocc_vars_data.remove_currency+"</th></tr></thead>");a("#wcaiocc_currency_table").append("<tbody></tbody>");a("#wcaiocc_currency_table tbody").sortable({helper:function(b,c){var e=c.children(),g=c.clone();g.children().each(function(b){a(this).width(e.eq(b).width())});return g},placeholder:"wcaiocc_currencies_highlight",axis:"y",update:function(){wcaiocc_update_currencies_list()}});var c=jQuery.parseJSON(a("#wcaiocc_available_currencies").val());
a.each(c,function(a){wcaiocc_add_new_currency(a,c[a],!0)})}});function wcaiocc_add_new_currency_blob(a){a=a.split("#data_sep#");var c=a[0],b={};b.name=a[1];b.symbol=a[2];b.position=a[3];b.thousand_separator=a[4];b.decimal_separator=a[5];b.number_decimals=a[6];wcaiocc_add_new_currency(c,b,!1)}
function wcaiocc_add_new_currency(a,c,b){if(40<jQuery("#wcaiocc_currency_table tr").length)alert(wcaiocc_vars_data.too_many_currencies);else{var d=c.name,e=c.symbol,g=c.position,h=c.thousand_separator,l=c.decimal_separator;c=c.number_decimals;var f=!1,k=" ";wcaiocc_vars_data.default_currency==a?(f=!0,k=" disabled"):(f=!1,k=" ");1==f&&(d=wcaiocc_vars_data.default_currency_name,e=wcaiocc_vars_data.default_currency_symbol,g=wcaiocc_vars_data.default_currency_position,h=wcaiocc_vars_data.default_currency_thousand_separator,
l=wcaiocc_vars_data.default_currency_decimal_separator,c=wcaiocc_vars_data.default_currency_number_decimals);if(0<jQuery("tr[data-wcaiocc-currency-code='"+a+"']").length)alert(wcaiocc_vars_data.currency_already_on_the_list);else{var m=" ",n=" ",p=" ",q=" ";"left"==g?m=" selected":"right"==g?n=" selected":"left_space"==g?p=" selected":"right_space"==g&&(q=" selected");d='<tr data-wcaiocc-currency-code="'+a+'">'+('<td><div id="wcaiocc_currency_'+a+'_code">'+a+"</div></td>")+('<td><input id="wcaiocc_currency_'+
a+'_name" type="text" value="'+d+'"'+k+"/></td>")+('<td><input id="wcaiocc_currency_'+a+'_symbol" type="text" value="'+e+'"'+k+" /></td>")+('<td><select id="wcaiocc_currency_'+a+'_currency_position"'+k+">");d+='<option value="left"'+m+">"+wcaiocc_vars_data.left+" ("+e+"99)</option>";d+='<option value="right"'+n+">"+wcaiocc_vars_data.right+" (99"+e+")</option>";d+='<option value="left_space"'+p+">"+wcaiocc_vars_data.left_space+" ("+e+" 99)</option>";d+='<option value="right_space"'+q+">"+wcaiocc_vars_data.right_space+
" (99 "+e+")</option>";d+="</select></td>";d+='<td><input id="wcaiocc_currency_'+a+'_thousand_separator" type="text" value="'+h+'"'+k+" /></td>";d+='<td><input id="wcaiocc_currency_'+a+'_decimal_separator" type="text" value="'+l+'"'+k+" /></td>";d+='<td><input id="wcaiocc_currency_'+a+'_number_decimals" type="number" value="'+c+'"'+k+" /></td>";d+="<td>";d+='<div><a data-wcaiocc-currency-code="'+a+'" class="button" href="#onclick_action" onclick="wcaiocc_remove_currency_from_list(this.getAttribute(\'data-wcaiocc-currency-code\'));">'+
wcaiocc_vars_data.remove_currency+"</a></div>";d+="</td>";jQuery("#wcaiocc_currency_table tbody").append(d);wcaiocc_update_currencies_list();2>=jQuery("#wcaiocc_currency_table tr").length?jQuery("#wcaiocc_currency_table tbody").sortable("disable"):jQuery("#wcaiocc_currency_table tbody").sortable("enable");jQuery("input[id^=wcaiocc_currency_], select[id^=wcaiocc_currency_]").on("change",function(){wcaiocc_update_currencies_list()});0==b&&0==f&&(b=wcaiocc_vars_data.wp_nonce,e={currency_data:{}},e.currency_data[a]=
{},e.currency_data[a].api=wcaiocc_vars_data.default_exchange_api,a={action:"wcaiocc_ajax",verification:b,execute:"update_exchange_rates",currency_data:e.currency_data},wcaiocc_block_screen(!0),jQuery.post(ajaxurl,a,function(a){wcaiocc_block_screen(!1)}))}}}
function wcaiocc_update_currencies_list(){jQuery("#wcaiocc_available_currencies").val("");var a={};jQuery("#wcaiocc_currency_table tbody tr").each(function(c){currency_code=this.getAttribute("data-wcaiocc-currency-code");currency_name=jQuery("#wcaiocc_currency_"+currency_code+"_name").val();currency_symbol=jQuery("#wcaiocc_currency_"+currency_code+"_symbol").val();currency_position=jQuery("#wcaiocc_currency_"+currency_code+"_currency_position").val();currency_thousand_separator=jQuery("#wcaiocc_currency_"+
currency_code+"_thousand_separator").val();currency_decimal_separator=jQuery("#wcaiocc_currency_"+currency_code+"_decimal_separator").val();currency_number_decimals=jQuery("#wcaiocc_currency_"+currency_code+"_number_decimals").val();a[currency_code]={};a[currency_code].order=c+1;a[currency_code].name=currency_name;a[currency_code].symbol=currency_symbol;a[currency_code].position=currency_position;a[currency_code].thousand_separator=currency_thousand_separator;a[currency_code].decimal_separator=currency_decimal_separator;
a[currency_code].number_decimals=currency_number_decimals});jQuery("#wcaiocc_available_currencies").val(JSON.stringify(a))}
function wcaiocc_remove_currency_from_list(a){if(2>=jQuery("#wcaiocc_currency_table tr").length)return alert(wcaiocc_vars_data.too_few_currencies),!1;var c="tr[data-wcaiocc-currency-code='"+a+"']";jQuery(c).fadeOut(250,function(){jQuery(c).remove();wcaiocc_update_currencies_list();2>=jQuery("#wcaiocc_currency_table tr").length&&jQuery("#wcaiocc_currency_table tbody").sortable("disable")})}
jQuery(document).ready(function(a){if(0<a("input.wcaiocc_exchange_rates").length){a("input.wcaiocc_exchange_rates").after('<table class="wcaiocc-exchange-rates-table" id="wcaiocc_exchange_rates_table"></table>');a("#wcaiocc_exchange_rates_table").append('<thead><tr><th class="wcaiocc_exchange_cell_code">'+wcaiocc_vars_data.currency_code+'</th><th class="wcaiocc_exchange_cell_name">'+wcaiocc_vars_data.currency_name+'</th><th class="wcaiocc_exchange_cell_symbol">'+wcaiocc_vars_data.currency_symbol+
'</th><th class="wcaiocc_exchange_cell_api">'+wcaiocc_vars_data.exchange_api+'</th><th class="wcaiocc_exchange_cell_rate">'+wcaiocc_vars_data.exchange_rate+'</th><th class="wcaiocc_exchange_cell_update wcaiocc-center">'+wcaiocc_vars_data.update_rate+"</th></tr></thead>");a("#wcaiocc_exchange_rates_table").append("<tbody></tbody>");a("#wcaiocc_exchange_rates_table").after('<a class="button wcaiocc-update-all-button" href="#onclick_action" onclick="wcaiocc_update_exchange_rates(\'update_all_exchange_rates\');">'+
wcaiocc_vars_data.update_all_label+"</a>");var c=jQuery.parseJSON(a("#wcaiocc_inner_use_currencies_in_use").val());a.each(c,function(a){wcaiocc_add_new_exchange_rate_row(a,c[a])})}});
function wcaiocc_add_new_exchange_rate_row(a,c){var b=c.name,d=c.symbol,e=!1,e=wcaiocc_vars_data.default_currency==a?!0:!1;1==e&&(b=wcaiocc_vars_data.default_currency_name,d=wcaiocc_vars_data.default_currency_symbol);var g=jQuery("#wcaiocc_exchange_rate_"+a).val(),h=jQuery("#wcaiocc_exchange_api_"+a).val(),b='<tr data-wcaiocc-currency-code="'+a+'">'+('<td><div id="wcaiocc_exchange_'+a+'_code">'+a+"</div></td>")+('<td><div id="wcaiocc_exchange_'+a+'_name">'+b+"</div></td>")+('<td><div id="wcaiocc_exchange_'+
a+'_symbol">'+d+"</div></td>")+"<td>";if(wcaiocc_vars_data.default_currency==a)b+='<div class="wcaiocc_default_exchange_label" id="wcaiocc_currency_'+a+'_default_exchange">&mdash;</div>';else{var l=d=" ",f=" ",k=" ",m=" ",n=" ";"yahoo"==h?d=" selected":"ecb"==h?l=" selected":"fixer"==h?f=" selected":"fcca"==h?k=" selected":"google"==h?m=" selected":"techunits"==h&&(n=" selected");b+='<select id="wcaiocc_exchange_'+a+'_api">';b+='<option value="yahoo"'+d+">Yahoo Finance</option>";b+='<option value="ecb"'+
l+">European Central Bank</option>";b+='<option value="fixer"'+f+">Fixer.io</option>";b+='<option value="fcca"'+k+">Free Currency Converter API</option>";b+='<option value="google"'+m+">Google Finance</option>";b+='<option value="techunits"'+n+">Techunits Currency Exchange</option>";b+="</select>"}b+="</td>";b+="<td>";b=1==e?b+('<input id="wcaiocc_exchange_'+a+'_rate" type="text" value="'+g+'" disabled />'):b+('<input id="wcaiocc_exchange_'+a+'_rate" type="text" value="'+g+'" />');b+="</td>";b+='<td class="wcaiocc-center">';
b=1==e?b+('<div class="wcaiocc_default_exchange_label" id="wcaiocc_currency_'+a+'_default_exchange">&mdash;</div>'):b+('<div><a data-wcaiocc-currency-code="'+a+'" class="button" href="#onclick_action" onclick="wcaiocc_update_exchange_rates(this.getAttribute(\'data-wcaiocc-currency-code\'));">'+wcaiocc_vars_data.update_label+"</a></div>");b+="</td>";jQuery("#wcaiocc_exchange_rates_table tbody").append(b);jQuery("input[id^=wcaiocc_exchange_], select[id^=wcaiocc_exchange_]").on("change",function(){wcaiocc_update_data()})}
function wcaiocc_update_exchange_rates(a){var c={},b="";"update_all_exchange_rates"==a?jQuery("#wcaiocc_exchange_rates_table > tbody > tr[data-wcaiocc-currency-code]").each(function(d){a=jQuery(this).attr("data-wcaiocc-currency-code");a==wcaiocc_vars_data.default_currency?(c[a]={},c[a].api=wcaiocc_vars_data.default_exchange_api):(b="#wcaiocc_exchange_"+a+"_api",c[a]={},c[a].api=jQuery(b).val())}):(b="#wcaiocc_exchange_"+a+"_api",c[a]={},c[a].api=jQuery(b).val());action_data={name:"update_exchange_rates",
currency_data:{}};action_data.currency_data=c;wcaiocc_callback_action(action_data)}
function wcaiocc_update_data(){var a=null,c=null,b=null,d=null,e=null;jQuery("#wcaiocc_exchange_rates_table > tbody > tr[data-wcaiocc-currency-code]").each(function(g){a=jQuery(this).attr("data-wcaiocc-currency-code");d="#wcaiocc_exchange_"+a+"_rate";e="#wcaiocc_exchange_"+a+"_api";c=jQuery(d).val();c=c.replace(",",".");c=parseFloat(c);c!==c&&(c=1);jQuery(d).val(c);b=jQuery(e).val();jQuery("#wcaiocc_exchange_rate_"+a).val(c);jQuery("#wcaiocc_exchange_api_"+a).val(b)})}jQuery(document).ready(function(a){a("#wcaiocc_currency_switcher_text")});
jQuery(document).ready(function(a){if(0<a("input.wcaiocc_advanced_additional_restore_defaults_input").length){var c=a("#wcaiocc_country_list_data").val(),c=jQuery.parseJSON(c),b='<div id="wcaiocc_country_currency_modal" style="display:none;">',b=b+'<table class="wcaiocc_countries_currencies_table">',b=b+"<thead><tr>",b=b+('<td class="wcaiocc_countries_currencies_first_column"><h4>'+wcaiocc_vars_data.country_iso_code+"</h4></td>"),b=b+('<td class="wcaiocc_countries_currencies_second_column"><h4>'+
wcaiocc_vars_data.currency_iso_code+"</h4></td>"),b=b+"</tr></thead>",b=b+"<tbody>";a.each(c,function(a,c){b+='<tr class="wcaiocc_country_currency_row">';b+='<td><input type="text" class="wcaiocc_country_currency_country" maxlength="2" value="'+a+'" disabled /></td>';b+='<td><input type="text" class="wcaiocc_country_currency_code" maxlength="3" value="'+c+'" /></td>';b+="</tr>"});b+="</tbody>";b+="</table>";b+='<div id="wcaiocc_change_country_currency_buttons_wrapper">';b+='<input id="wcaiocc_change_country_currency_save_changes_button" name="" class="button-primary" type="submit" value="'+
wcaiocc_vars_data.save_changes_button+'" />';b+='<a id="wcaiocc_add_country_button" class="button" href="#onclick_action">'+wcaiocc_vars_data.add_country_button+"</a>";b+="</div>";b+="</div>";b+='<a class="button thickbox" title="WooCommerce All in One Currency Converter" href="#TB_inline?height=600&width=310&inlineId=wcaiocc_country_currency_modal">'+wcaiocc_vars_data.change_currencies_button+"</a>";a("#wcaiocc_country_list_data").after(b);a("#wcaiocc_add_country_button").on("click",function(){a(".wcaiocc_countries_currencies_table > tbody").append('<tr class="wcaiocc_country_currency_row"><td><input type="text" class="wcaiocc_country_currency_country" maxlength="2" value="" /></td><td><input type="text" class="wcaiocc_country_currency_code" maxlength="3" value="" /></td></tr>');
a("#TB_ajaxContent").scrollTop(a("#TB_ajaxContent")[0].scrollHeight);a("input.wcaiocc_country_currency_country:last-of-type").focus()});a("#wcaiocc_change_country_currency_save_changes_button").on("click",function(){a("#wcaiocc_country_list_data").val("");var b="",c="",g={};a("tr.wcaiocc_country_currency_row").each(function(){b=a(this).find("input.wcaiocc_country_currency_country").val();c=a(this).find("input.wcaiocc_country_currency_code").val();if(""==b||""==c)return!0;g[b]=c});var h=JSON.stringify(g);
a("#wcaiocc_country_list_data").val(h);a('#mainform .submit input[name="save"]').click()});c='<a class="button" href="#onclick_action" onclick="wcaiocc_callback_action(\'restore_defaults\');">'+wcaiocc_vars_data.restore_defaults_button+"</a>";a("input.wcaiocc_advanced_additional_restore_defaults_input").after(c)}});